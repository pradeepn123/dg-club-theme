{%- liquid
    assign sort_by = results.sort_by | default: results.default_sort_by
    if results.url
      assign results_url = results.url
    else
      assign terms = results.terms | escape
      assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
    endif
  -%}
  <facet-filters-form class="facets--bar{% if facets_desktop == 'sidebar' %} facets--bar-inline{% endif %}">
      <form id="FacetFiltersForm-bar" class="facets__form">
          {%- if results.terms -%}
              <input type="hidden" name="q" value="{{ results.terms | escape }}">
              <input name="options[prefix]" type="hidden" value="last">
          {%- endif -%}
          {% if results.current_vendor or results.current_type %}
              <input type="hidden" name="q" value="{{ results.current_vendor }}{{ results.current_type }}">
          {% endif %}
  
          <div class="thb-filter-sort-count">
              {%- if enable_sorting -%}
                  <div class="thb-filter-sort">
                      <custom-select class="custom-select" data-auto-close="true">
                          {%- liquid
                              assign sort_by = results.sort_by | default: results.default_sort_by
                              for option in results.sort_options
                                  if option.value == sort_by
                                      assign sort_by_name = option.name
                                  endif
                              endfor
                          -%}
                          <button class="custom-select--button"><span class="custom-select--text">{{ sort_by_name }}</span> <span class="custom-select--arrow">{%- render 'svg-icons' with 'thb-collections-select' -%}</span></button>
                          <div class="custom-select--list">
                              <scroll-shadow>
                                  <ul>
                                      {%- for option in results.sort_options -%}
                              <li class="custom-select--item" tabindex="-1">
                                <button class="{% if option.value == sort_by %}custom-select--item-active{% endif %}" {% if option.value == sort_by %} aria-current="true"{% endif %} data-value="{{ option.value | escape }}">
                                                  {{ option.name | escape }}
                                </button>
                              </li>
                            {%- endfor -%}
                                  </ul>
                              </scroll-shadow>
                          </div>
                          <input type="hidden" id="SortBy" name="sort_by" value="{{ results.default_sort_by }}">
                      </custom-select>
                  </div>
              {%- endif -%}
              </div>
          </div>
      </form>
  </facet-filters-form>
  